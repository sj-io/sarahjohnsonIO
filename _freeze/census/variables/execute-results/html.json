{
  "hash": "f7b1beb7553b3ed8167f47a48b9e1bc0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ACS Variables\"\ndescription: |\n  An overview of Census ACS variables, particularly related to housing.\ncategories:\n  - census\nimage: \"img/variables.png\"\ndate: \"2021-12-24\"\ndate-modified: \"2023-10-16\"\n---\n\n\n\n\nThe R `tidycensus` package is an amazingly simple way to access Census data.[^1] When you use the package to call Census data, you need to know the variable code for the table or piece of data you're trying to find. The `load_variables()` function allows you to quickly see all variables released in a given year by a survey or program. Census data is well organized and mostly consistent across years.[^2] This page is meant to help sort through the tens of thousands of variables to find the information you need.\n\n[^1]: The `tidycensus` package was created by [Kyle Walker](https://twitter.com/kyle_e_walker), and he also published an amazingly helpful book [Analyzing US Census Data](https://walker-data.com/census-r/index.html), which I strongly recommend for anyone interested in accessing Census data with R.\n\n[^2]: The Census Bureau releases [information](https://www.census.gov/data/developers/data-sets/acs-1year.2021.html) on which variables have changed from the previous year.\n\n# ACS Variables\n\nVariables for the ACS Detailed Tables all begin with the same pattern: a letter (B or C) followed by five digits. The first two digits correspond to a general topic of information, defined in the table below. Variables that start with \"C\" correspond to a \"B\" table, but provide more condensed information, such as fewer age groups or income categories. These can be useful when you feel like a graph has too much info and needs to be simplified.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-02f5b6445f62b72afbb8\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-02f5b6445f62b72afbb8\">{\"x\":{\"style\":\"bootstrap\",\"filter\":\"none\",\"vertical\":false,\"data\":[[\"B01\",\"B02 &amp; C02\",\"B03 &amp; C03\",\"B04 &amp; C04\",\"B05 &amp; C05\",\"B06 &amp; C06\",\"B07 &amp; C07\",\"B08 &amp; C08\",\"B09 &amp; C09\",\"B10\",\"B11 &amp; C11\",\"B12\",\"B13\",\"B14 &amp; C14\",\"B15 &amp; C15\",\"B16 &amp; C16\",\"B17 &amp; C17\",\"B18 &amp; C18\",\"B19 &amp; C19\",\"B20\",\"B21 &amp; C21\",\"B22 &amp; C22\",\"B23 &amp; C23\",\"B24 &amp; C24\",\"B25 &amp; C25\",\"B26\",\"B27 &amp; C27\",\"B28\",\"B29\",\"B98\",\"B99\"],[\"Population Overview\",\"Race\",\"Race and Ethnicity\",\"Ancestry\",\"Nativity\",\"Place of Birth\",\"Geographic Mobility\",\"Workers\",\"Children Under 18\",\"Grandparents\",\"Household Type\",\"Marriage\",\"Women with Recent Birth\",\"School Enrollment\",\"Educational Attainment\",\"Language Spoken at Home\",\"Poverty Status\",\"Disability\",\"Household Income\",\"Income for Working Population\",\"Veterans\",\"Food Stamps/SNAP\",\"Employment Status and Workers\",\"Occupation and Industry\",\"Housing\",\"Group Quarters\",\"Health Insurance\",\"Computers and Internet\",\"Citizen, Voting-Age Population\",\"Unweighted Sample and Coverage, Response, and Allocation Rates\",\"Allocation\"]],\"container\":\"<table class=\\\"table table-striped table-hover row-border order-column display\\\">\\n  <thead>\\n    <tr>\\n      <th>Start of Variable<\\/th>\\n      <th>Category<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":12,\"autoWidth\":true,\"dom\":\"tp\",\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":0}],\"order\":[],\"orderClasses\":false,\"lengthMenu\":[10,12,25,50,100]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n# Housing Variables\n\nHousing variables start with \"B25\", or \"C25\" for condensed versions. Sometimes a specific topic will have a lot of different subvariables. For instance, information on tenure (whether a household rents or owns) can be broken down by age, what year the structure was built, etc. I created a directory tree as a simple way to visualize how Census variable relate to each other. The following tree shows top-level ACS 1-Year variables related to housing (excluding condensed variables). The variables that start with \"B\" are usually also present in the 5-Year ACS.\n\n\n::: {.cell .column-page-right}\n\n```{.zsh .cell-code}\n.\n├── Age-Of-Householder\n│   ├── C25055-(2005-2022)\n│   ├── Gross-Rent-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   ├── B25072-(2005-2022)\n│   │   └── C25072-(2005-2012)\n│   ├── Meals-Included-In-Rent\n│   │   └── B25055-(2005-2022)\n│   └── Selected-Monthly-Owner-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│       ├── B25093-(2005-2022)\n│       └── C25093-(2005-2022)\n├── Annual-Other-Fuel-Costs\n│   └── B25135-(2021-2022)\n├── Annual-Water-And-Sewer-Costs\n│   └── B25134-(2021-2022)\n├── Average-Household-Size-Of-Occupied-Housing-Units\n│   └── Tenure\n│       └── B25010-(2005-2022)\n├── Bedrooms\n│   ├── B25041-(2005-2022)\n│   ├── Gross-Rent\n│   │   ├── B25068-(2005-2022)\n│   │   └── C25068-(2005-2022)\n│   └── Occupancy-Status\n│       └── B25137-(2022)\n├── Contract-Rent\n│   ├── B25056-(2005-2022)\n│   └── C25056-(2005-2022)\n├── Gross-Rent\n│   └── B25063-(2005-2022)\n├── Gross-Rent-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   └── B25070-(2005-2022)\n├── House-Heating-Fuel\n│   └── B25040-(2005-2022)\n├── Household-Income\n│   ├── Gross-Rent-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   ├── B25074-(2005-2022)\n│   │   └── C25074-(2005-2022)\n│   └── Selected-Monthly-Owner-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│       ├── B25095-(2009-2022)\n│       └── C25095-(2009-2022)\n├── Household-Income-In-The-Past-12-Months-In-Acsyear-Inflation-Adjusted-Dollars\n│   ├── Gross-Rent\n│   │   ├── B25122-(2005-2022)\n│   │   └── C25122-(2005-2022)\n│   └── Value\n│       ├── B25121-(2005-2022)\n│       └── C25121-(2005-2022)\n├── Housing-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   └── B25140-(2022)\n├── Housing-Units\n│   └── B25001-(2005-2022)\n├── Inclusion-Of-Utilities-In-Rent\n│   └── B25069-(2005-2022)\n├── Kitchen-Facilities\n│   ├── C25054-(2005-2012)\n│   └── Meals-Included-In-Rent\n│       └── B25054-(2005-2022)\n├── Kitchen-Facilities-For-All-Housing-Units\n│   └── B25051-(2005-2022)\n├── Kitchen-Facilities-For-Occupied-Housing-Units\n│   └── B25052-(2005-2022)\n├── Lower-Contract-Rent-Quartile-Dollars\n│   └── B25057-(2005-2022)\n├── Lower-Gross-Rent-Quartile-Dollars\n│   └── B25138-(2022)\n├── Lower-Value-Quartile-Dollars\n│   └── B25076-(2005-2022)\n├── Median-Contract-Rent-Dollars\n│   └── B25058-(2005-2022)\n├── Median-Gross-Rent\n│   ├── Bedrooms\n│   │   └── B25031-(2015-2022)\n│   ├── Year-Householder-Moved-Into-Unit\n│   │   └── B25113-(2005-2022)\n│   └── Year-Structure-Built\n│       └── B25111-(2005-2022)\n├── Median-Gross-Rent-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months-Dollars\n│   └── B25071-(2005-2022)\n├── Median-Gross-Rent-Dollars\n│   └── B25064-(2005-2022)\n├── Median-Household-Income-In-The-Past-12-Months-In-Acsyear-Inflation-Adjusted-Dollars\n│   └── Tenure\n│       └── B25119-(2005-2022)\n├── Median-Monthly-Housing-Costs-Dollars\n│   └── B25105-(2005-2022)\n├── Median-Number-Of-Rooms\n│   ├── B25018-(2005-2022)\n│   └── Tenure\n│       └── B25021-(2005-2022)\n├── Median-Selected-Monthly-Owner-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   └── B25092-(2005-2022)\n├── Median-Selected-Monthly-Owner-Costs-Dollars\n│   └── Mortgage-Status\n│       └── B25088-(2005-2022)\n├── Median-Value\n│   ├── Year-Householder-Moved-Into-Unit\n│   │   └── B25109-(2005-2022)\n│   └── Year-Structure-Built\n│       └── B25107-(2005-2022)\n├── Median-Value-Dollars\n│   └── B25077-(2005-2022)\n├── Median-Value-Dollars-For-Mobile-Homes\n│   └── B25083-(2005-2022)\n├── Median-Year-Householder-Moved-Into-Unit\n│   └── Tenure\n│       └── B25039-(2005-2022)\n├── Median-Year-Structure-Built\n│   ├── B25035-(2005-2022)\n│   └── Tenure\n│       └── B25037-(2005-2022)\n├── Monthly-Electricity-Costs\n│   └── B25132-(2021-2022)\n├── Monthly-Gas-Costs\n│   └── B25133-(2021-2022)\n├── Monthly-Housing-Costs\n│   └── B25104-(2005-2022)\n├── Mortgage-Status\n│   ├── Age-Of-Householder\n│   │   ├── B25027-(2009-2022)\n│   │   └── C25027-(2009-2012)\n│   ├── B25081-(2005-2022)\n│   ├── Household-Income-In-The-Past-12-Months-In-Acsyear-Inflation-Adjusted-Dollars\n│   │   └── B25098-(2005-2022)\n│   ├── Median-Household-Income-In-The-Past-12-Months-In-Acsyear-Inflation-Adjusted-Dollars\n│   │   └── B25099-(2005-2022)\n│   ├── Median-Real-Estate-Taxes-Paid-Dollars\n│   │   └── B25103-(2005-2022)\n│   ├── Median-Value-Dollars\n│   │   └── B25097-(2005-2022)\n│   ├── Monthly-Housing-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   └── B25101-(2005-2022)\n│   ├── Ratio-Of-Value-To-Household-Income-In-The-Past-12-Months\n│   │   └── B25100-(2005-2022)\n│   ├── Real-Estate-Taxes-Paid\n│   │   └── B25102-(2005-2022)\n│   ├── Selected-Monthly-Owner-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   └── B25091-(2005-2022)\n│   └── Value\n│       └── B25096-(2005-2022)\n├── Mortgage-Status-And-Selected-Monthly-Owner-Costs\n│   └── B25087-(2005-2022)\n├── Occupancy-Status\n│   └── B25002-(2005-2022)\n├── Other-Vacancy-Status\n│   └── B25130-(2021-2022)\n├── Plumbing-Facilities\n│   └── Occupants-Per-Room\n│       ├── C25050-(2005-2012)\n│       └── Year-Structure-Built\n│           └── B25050-(2005-2022)\n├── Plumbing-Facilities-For-All-Housing-Units\n│   └── B25047-(2005-2022)\n├── Plumbing-Facilities-For-Occupied-Housing-Units\n│   └── B25048-(2005-2022)\n├── Price-Asked\n│   ├── B25085-(2005-2022)\n│   └── C25085-(2005-2022)\n├── Race-Of-Householder\n│   └── B25006-(2005-2022)\n├── Rent-Asked\n│   ├── B25061-(2005-2022)\n│   └── C25061-(2005-2012)\n├── Rooms\n│   └── B25017-(2005-2022)\n├── Selected-Monthly-Owner-Costs\n│   └── B25094-(2005-2022)\n├── Structure-Type\n│   └── Occupancy-Status\n│       └── B25136-(2022)\n├── Tenure\n│   ├── Age-Of-Householder\n│   │   ├── B25007-(2005-2022)\n│   │   ├── Occupants-Per-Room\n│   │   │   ├── B25015-(2005-2022)\n│   │   │   └── C25015-(2005-2012)\n│   │   ├── Units-In-Structure\n│   │   │   └── B25125-(2010-2022)\n│   │   ├── Year-Householder-Moved-Into-Unit\n│   │   │   └── B25128-(2010-2022)\n│   │   └── Year-Structure-Built\n│   │       └── B25126-(2010-2022)\n│   ├── B25003-(2005-2022)\n│   ├── Bedrooms\n│   │   └── B25042-(2005-2022)\n│   ├── Educational-Attainment-Of-Householder\n│   │   └── B25013-(2005-2022)\n│   ├── Families-And-Presence-Of-Own-Children\n│   │   └── B25012-(2005-2022)\n│   ├── House-Heating-Fuel\n│   │   ├── B25117-(2005-2022)\n│   │   └── C25117-(2005-2012)\n│   ├── Household-Income-In-The-Past-12-Months-In-Acsyear-Inflation-Adjusted-Dollars\n│   │   └── B25118-(2005-2022)\n│   ├── Household-Size\n│   │   ├── Age-Of-Householder\n│   │   │   ├── B25116-(2005-2022)\n│   │   │   └── C25116-(2005-2012)\n│   │   ├── B25009-(2005-2022)\n│   │   └── Units-In-Structure\n│   │       └── B25124-(2010-2022)\n│   ├── Household-Type\n│   │   └── C25115-(2006-2012)\n│   ├── Household-Type-And-Presence-And-Age-Of-Own-Children\n│   │   ├── B25115-(2005-2022)\n│   │   └── C25115-(2005)\n│   ├── Household-Type-Including-Living-Alone-And-Age-Of-Householder\n│   │   └── B25011-(2005-2022)\n│   ├── Housing-Costs-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   └── B25106-(2005-2022)\n│   ├── Kitchen-Facilities\n│   │   └── B25053-(2005-2022)\n│   ├── Occupants-Per-Room\n│   │   ├── B25014-(2005-2022)\n│   │   └── C25014-(2005-2012)\n│   ├── Plumbing-Facilities\n│   │   ├── B25049-(2005-2022)\n│   │   └── Occupants-Per-Room\n│   │       ├── B25016-(2005-2022)\n│   │       └── C25016-(2005-2012)\n│   ├── Rooms\n│   │   ├── B25020-(2005-2022)\n│   │   └── C25020-(2005-2012)\n│   ├── Selected-Physical-And-Financial-Conditions\n│   │   ├── B25123-(2005-2022)\n│   │   └── C25123-(2005-2012)\n│   ├── Telephone-Service-Available\n│   │   ├── Age-Of-Householder\n│   │   │   ├── B25043-(2005-2022)\n│   │   │   └── C25043-(2005)\n│   │   └── C25043-(2006-2012)\n│   ├── Units-In-Structure\n│   │   ├── B25032-(2005-2022)\n│   │   └── C25032-(2005-2022)\n│   ├── Vehicles-Available\n│   │   ├── Age-Of-Householder\n│   │   │   └── B25045-(2005-2022)\n│   │   ├── B25044-(2005-2022)\n│   │   └── C25045-(2005-2022)\n│   ├── Year-Householder-Moved-Into-Unit\n│   │   ├── B25038-(2005-2022)\n│   │   └── Units-In-Structure\n│   │       └── B25129-(2010-2022)\n│   └── Year-Structure-Built\n│       ├── B25036-(2005-2022)\n│       └── Units-In-Structure\n│           └── B25127-(2010-2022)\n├── Total-Population-In-Occupied-Housing-Units\n│   └── Tenure\n│       ├── B25008-(2005-2022)\n│       ├── Units-In-Structure\n│       │   ├── B25033-(2005-2022)\n│       │   └── C25033-(2005-2022)\n│       └── Year-Householder-Moved-Into-Unit\n│           └── B25026-(2009-2022)\n├── Units-In-Structure\n│   ├── B25024-(2005-2022)\n│   ├── Bedrooms\n│   │   ├── B25029-(2005)\n│   │   └── C25029-(2005)\n│   ├── C25026-(2005)\n│   ├── Gross-Rent-As-A-Percentage-Of-Household-Income-In-The-Past-12-Months\n│   │   ├── B25073-(2005-2013)\n│   │   └── C25073-(2005-2012)\n│   ├── Kitchen-Facilities\n│   │   └── B25031-(2005)\n│   ├── Plumbing-Facilities\n│   │   └── B25030-(2005)\n│   ├── Residence-Status\n│   │   └── B25026-(2005)\n│   ├── Rooms\n│   │   ├── B25028-(2005)\n│   │   └── C25028-(2005)\n│   ├── Vacancy-Status\n│   │   ├── B25025-(2005)\n│   │   └── C25025-(2005)\n│   └── Year-Structure-Built\n│       ├── B25027-(2005)\n│       └── C25027-(2005)\n├── Upper-Contract-Rent-Quartile-Dollars\n│   └── B25059-(2005-2022)\n├── Upper-Gross-Rent-Quartile-Dollars\n│   └── B25139-(2022)\n├── Upper-Value-Quartile-Dollars\n│   └── B25078-(2005-2022)\n├── Vacancy-Duration\n│   └── B25131-(2021-2022)\n├── Vacancy-Status\n│   ├── B25004-(2005-2022)\n│   └── C25004-(2005-2022)\n├── Vacant-Current-Residence-Elsewhere\n│   └── B25005-(2005-2022)\n├── Value\n│   ├── B25075-(2005-2022)\n│   └── C25075-(2006-2022)\n└── Year-Structure-Built\n    └── B25034-(2005-2022)\n\n297 directories\n```\n:::\n\n\n# How to make the tree\n\n## R\n\nFirst, load the tidyverse and tidycensus packages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidycensus)\n```\n:::\n\n\nUse the `load_variables()` function to get Census variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ACS1 data is available from 2005-2022, excluding 2020\nyrs <- c(2005:2019, 2021, 2022)\nnames(yrs) <- yrs\n\n# Get variables for ALL years\nvACS1 <- map_dfr(yrs, ~ {\n  load_variables(.x, \"acs1\") %>% \n  filter(str_detect(name, \"^[BC]25\"))\n}, .id = \"yr\")\n```\n:::\n\n\nNarrow for housing variables and clean up.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get the top level variables\nhsg_top <- vACS1 %>% \n  filter(str_detect(name, \"_001$\"),           #' only top-level variables\n         !str_detect(name, \"[:alpha:]_\"),     #' omit race variables\n         !str_detect(label, \"Estimate!!Aggregate\") #' omit aggregates, medians, etc.\n  ) %>% \n  mutate(across(c(label, concept), \n                ~ str_replace_all(.x, c(\"\\\\b20\\\\d{2}\\\\b\" = \"ACSYEAR\",\n                                        \"INCOME THE PAST 12 MONTHS\" = \"INCOME IN THE PAST 12 MONTHS\")\n                                  ) %>% \n                  str_to_title())) %>% \n  select(-label)\n```\n:::\n\n\nFind the first and last year the variable appeared. Note that the \"concept\" column is currently broken for 2010 & 2011 ACS1, and a couple variables changed over the years, so group by name AND concept.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmin_yr <- hsg_top %>% \n  filter(!is.na(concept)) %>% \n  group_by(name, concept) %>% \n  slice_min(yr) %>% \n  mutate(nm = \"min\")\n\nmax_yr <- hsg_top %>% \n  filter(!is.na(concept)) %>% \n  group_by(name, concept) %>% \n  slice_max(yr) %>% \n  mutate(nm = \"max\")\n\n#' Join together and combine the first and last year\nhsg_yrs <- rbind(min_yr, max_yr) %>% \n  pivot_wider(names_from = nm, values_from = yr) %>% \n  mutate(years = case_when(\n    min != max & min != 2012 ~ paste0(\"(\", min, \"-\", max, \")\"),\n    min != max & min == 2012 ~ paste0(\"(2010-\", max, \")\"),\n    TRUE ~ paste0(\"(\", min, \")\")\n  )) %>% \n  arrange(name, min, max) %>% \n  select(-c(min, max)) %>% \n  distinct()\n```\n:::\n\n\nFormat for the command line.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhsg_vs <- hsg_yrs %>% \n  mutate(concept = str_replace_all(concept, \"-(?=[:alpha:])\", \" \") %>% \n         str_remove_all(\"[:punct:]\") %>% \n         str_replace_all(\" By \", \"/\"),\n         name = str_remove(name, \"_001\")\n         ) %>% \n  unite(col = \"name\", name, years, sep = \"-\", na.rm = TRUE) %>% \n  unite(col = \"fileStr\", concept, name, sep = \"/\", na.rm = TRUE) %>% \n  mutate(fileStr = str_replace_all(fileStr, \"\\\\s\", \"-\"),\n         fileStr = str_replace_all(fileStr, \"-{2,}\", \"-\"))\n\nv_ACS1 <- hsg_vs$fileStr\n\nwrite_lines(v_ACS1, file = \"~/Documents/vACS1.txt\")\n```\n:::\n\n\nTo make the tree, we will convert this text file to a directory structure.\n\n## Command Line\n\nIn the terminal, make a new directory to house your Census tree.\n\n``` zsh\nmkdir ~/Documents/census\ncd Documents/census\n```\n\nConvert the text file to a file directory using the following code.\n\n``` zsh\nxargs -I {} mkdir -p \"{}\" < \"../vACS1.txt\"\n```\n\nFinally, create a tree of the file directory. Note: requires the [tree](https://formulae.brew.sh/formula/tree#default) package.\n\n``` zsh\ntree\n```\n\nThe output is the tree above.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.30/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-bootstrap-1.13.4/css/dataTables.bootstrap.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-bootstrap-1.13.4/css/dataTables.bootstrap.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-bootstrap-1.13.4/js/jquery.dataTables.min.js\"></script>\n<script src=\"../site_libs/dt-core-bootstrap-1.13.4/js/dataTables.bootstrap.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}